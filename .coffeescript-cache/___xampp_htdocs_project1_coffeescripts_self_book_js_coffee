{"mtime":1406625185,"js":"(function() {\n  var getMousePos, readURL, writeMessage;\n\n  writeMessage = function(canvas, message) {\n    var context;\n\n    context = canvas.getContext(\"2d\");\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    context.font = \"5pt Calibri\";\n    context.fillStyle = \"black\";\n    context.fillText(message, 10, 25);\n  };\n\n  getMousePos = function(canvas, evt) {\n    var rect;\n\n    rect = canvas.getBoundingClientRect();\n    return {\n      x: evt.clientX - rect.left,\n      y: evt.clientY - rect.top\n    };\n  };\n\n  readURL = function(input, img) {\n    var reader;\n\n    if (input.files && input.files[0]) {\n      reader = new FileReader();\n      reader.onload = function(e) {\n        $(img).attr(\"src\", e.target.result);\n      };\n      reader.readAsDataURL(input.files[0]);\n    }\n  };\n\n  $(function() {\n    var canvas, context, draw;\n\n    $(\".self-photo img\").on(\"click\", function(event) {\n      $(\"#self-photo-input\").click();\n    });\n    $(\"#self-top-back\").on(\"click\", function(event) {\n      $(\"#back-photo-input\").click();\n    });\n    $(\"#self-photo-input\").change(function() {\n      readURL(this, \"#self-photo\");\n      $(\"#self-photo-edit input[type=submit]\").click();\n    });\n    $(\"#back-photo-input\").change(function() {\n      readURL(this, \".self-top img\");\n      $(\"#back-photo-edit input[type=submit]\").click();\n    });\n    $(\"#arrow-right\").on(\"click\", function() {\n      $(\"#bb-bookblock\").bookblock(\"next\");\n      $(\"#arrow-left\").fadeIn();\n    });\n    $(\"#arrow-left\").on(\"click\", function() {\n      $(\"#bb-bookblock\").bookblock(\"prev\");\n      if ($(\".page-contain\").attr(\"name\") === 2) {\n        $(\"#arrow-left\").fadeOut();\n      } else {\n        $(\"#arrow-left\").fadeIn();\n      }\n    });\n    $(\".self-top-choice-info\").hover((function() {\n      return $(this).animate({\n        width: 135\n      }, 250);\n    }), function() {\n      return $(this).animate({\n        width: 40\n      }, 250);\n    });\n    $(\".ajax-fileupload\").submit(function() {\n      var formData;\n\n      formData = new FormData($(this)[0]);\n      $.ajax({\n        url: $(this).attr(\"action\"),\n        type: \"POST\",\n        data: formData,\n        async: false,\n        success: function(data) {},\n        cache: false,\n        contentType: false,\n        processData: false\n      });\n      return false;\n    });\n    $(\"#addfriend-info\").click(function() {\n      if ($(this).attr(\"name\") === \"not-friend\") {\n        $.get(\"account/send.php?receiveUser=\" + cookie + \"&signal=not-friend\", function(responseText) {});\n        $(this).attr(\"name\", \"send-friend\");\n        $(this).removeClass(\"fa-plus-circle\").addClass(\"fa-times-circle\");\n        return $(this).children('h1').text(\"取消申請\");\n      } else {\n        $.get(\"account/send.php?receiveUser=\" + cookie + \"&signal=send-friend\", function(responseText) {});\n        $(this).attr(\"name\", \"not-friend\");\n        $(this).removeClass(\"fa-times-circle\").addClass(\"fa-plus-circle\");\n        return $(this).children('h1').text(\"好友申請\");\n      }\n    });\n    canvas = document.getElementById(\"myCanvas\");\n    context = canvas.getContext(\"2d\");\n    draw = void 0;\n    canvas.addEventListener(\"mousedown\", (function(evt) {\n      var message, mousePos;\n\n      mousePos = getMousePos(canvas, evt);\n      message = \"Mouse position: \" + mousePos.x + \",\" + mousePos.y;\n      context.moveTo(mousePos.x * 0.48, mousePos.y * 0.4);\n      draw = true;\n      context.beginPath();\n    }), false);\n    canvas.addEventListener(\"mousemove\", (function(evt) {\n      var message, mousePos;\n\n      if (draw) {\n        mousePos = getMousePos(canvas, evt);\n        message = \"Mouse position: \" + mousePos.x + \",\" + mousePos.y;\n        context.lineTo(mousePos.x * 0.48, mousePos.y * 0.4);\n        context.strokeStyle = \"rgb(255,255,255)\";\n        context.stroke();\n      }\n    }), false);\n    canvas.addEventListener(\"mouseup\", (function(evt) {\n      draw = false;\n      context.closePath();\n    }), false);\n  });\n\n}).call(this);\n"}